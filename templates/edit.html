{% extends 'base.html' %}
{% block content %}
<div class="card mx-auto" style="max-width:720px">
  <div class="card-body">
    <h5 class="card-title">Edit Expense</h5>
    <form method="post">
      <div class="mb-2">
        <label>Date</label>
        <input type="date" name="date" class="form-control" value="{{ e.date.strftime('%Y-%m-%d') }}" required>
      </div>

      <div class="mb-2">
        <label>Category</label>
        <select class="form-select" name="category" required>
          {% for c in ['Food','Traveling','Entertainment','Other'] %}
            <option value="{{c}}" {% if e.category==c %}selected{% endif %}>{{c}}</option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-2">
        <label>Amount</label>
        <input type="number" step="0.01" name="amount" class="form-control" value="{{ '%.2f'|format(e.amount) }}" required>
      </div>

      <div class="mb-2">
        <label>Description</label>
        <input type="text" name="description" class="form-control" value="{{ e.description }}">
      </div>

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" value="1" id="paidForOther" name="paid_for_other" {% if e.paid_for_other %}checked{% endif %}>
        <label class="form-check-label" for="paidForOther">This was paid for someone else</label>
      </div>

      <div class="mb-2" id="payeeBlock" {% if not e.payee_name %}style="display:none"{% endif %}>
        <label>Paid for (name)</label>
        <input type="text" name="payee_name" class="form-control" value="{{ e.payee_name }}">
      </div>

      <button class="btn btn-primary">Save</button>
      <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
</div>

<script>
  const chk = document.getElementById('paidForOther');
  const pb = document.getElementById('payeeBlock');
  chk && chk.addEventListener('change', function(){ pb.style.display = this.checked ? 'block' : 'none'; });
</script>
{% endblock %}
